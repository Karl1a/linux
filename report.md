### PART 1

В терминале Ubuntu прописываем команду `cat /etc/issue` для проверки версии:

![img](imgs/screen1.png)

### PART 2

- Создаем нового пользователя:\
    `sudo useradd <username>`

![img](imgs/screen2.png)


- Добавляем нового пользователя в группу adm командой :\
    `sudo usermod -a -G adm <username>`

![img](imgs/screen3.png)

- проверяем создание нового пользователя командой:\
    `cat /etc/passwd`

![img](imgs/screen4.png)

### PART 3

- меняем название машины на user-1:\
    `sudo hostnamectl set-hostname user-1` 
- перезагружаем и смотрим новое название:\
    `sudo reboot` 

![img](imgs/screen5.png)

- Проверяем текущее время:\
    `sudo timedatectl`
![img](imgs/screen6.png)


- Установливаем временную зону, соответствующую текущему местоположению:\
    `sudo timedtectl set-timezone Europe/Moscow`
![img](imgs/screen7.png)

- выводим названия сетевых интерфейсов:\
    `ip -br link show`\
![img](imgs/screen8.png)

> Интерфейс lo по-другому называется loopback или обратная
> петля. Он используется для отладки сетевых программ и запуска
> серверных приложений на локальной машине. С этим интерфейсом
> всегда связан адрес 127.0.0.1. У него есть dns-имя –
> localhost.

- узнать ip адрес устройства от DHCP сервера:\
    `hostname -I`\
![img](imgs/screen9.png)  

> Для работы по сети любому устройству требуется IP-адрес.
> В протоколе IPv4 это числовой идентификатор, состоящий из 4 разрядов, каждый из
> которых отделяется точкой, без него устройство не может быть определено в сетевой
> инфраструктуре. Прикладной протокол DHCP выполняет всю работу по подбору сетевых
> настроек автоматически, без необходимости присваивать вручную каждому устройству
> свой IP-адрес. Это очень упрощает работу системного администратора в случае
> расширения сети.

- выводим внешний ip-адрес шлюза:\
    `wget -qO- eth0.me`\
![img](imgs/screen10.png)  


- выводим внутренний ip-адрес шлюза:\
    `ip route`
![img](imgs/screen11.png)  
##### Задать статичные (заданные вручную, а не полученные от DHCP сервера) настройки ip, gw, dns (использовать публичный DNS серверы, например 1.1.1.1 или 8.8.8.8).  
- открываем config файл:\
`vim /etc/netplan/00-installer-config.yaml`

![img](imgs/screen12.png)  
- Задаем вручную статичные настройки ip, gw, dns:\
![img](imgs/screen13.png) 
- сохраняем внесенные изменения:\
`sudo netplan apply`
- перезагружаем машину и проверяем сетевые настройки

- пингуем удаленные хостов 1.1.1.1

![img](imgs/screen14.png)

### PART 4
- обновляю системные пакеты до последней версии:\
`sudo apt update`\
`sudo apt upgrade`

![img](imgs/screen16.png)

### PART 5

##### Разрешить пользователю, созданному в [Part 2](#part-2-создание-пользователя), выполнять команду sudo.
- создам файл для нашего пользователя:\
`sudo touch /etc/sudoers.d/user2`
- Открываем его в nano:\
    `sudo nano /etc/sudoers.d/user2`\
![img](imgs/screen17.png)
- Выполним:\
  `sudo apt update`\
![img](imgs/screen18.png)

### PART 6

##### Настроить службу автоматической синхронизации времени.  

- выводим время, часового пояса, в котором находимся:\
`timedatectl`\
![img](imgs/screen19.png)\
  `timedatectl show`\
![img](imgs/screen20.png)

### PART 7

- устанавливаем vim, nano, joe:

`sudo apt install vim`\
`sudo apt install nano`\
`sudo apt install joe`\

##### VIM

- создаем файл test_vim.txt
- записываем в файл Karliahp и выходим с последующим сохранением:
`:wq`

![img](imgs/screen21.png)

- записываем в файл 21 School 21 и выходим без последующего сохранения:
`:!q`

![img](imgs/screen22.png)

- находим в тексте необходимое слово и заменяем его на другое:
`:s/.../...`

![img](imgs/screen23.png)

##### NANO

- создаем файл test_vim.txt
- записываем в файл karliahp и выходим с последующим сохранением:
`ctrl+x ->y`

![img](imgs/screen24.png)

- записываем в файл 21 School 21 и выходим без последующего сохранения:
`cnt+x -> n`

- находим в тексте необходимое слово и заменяем его на другое:
`ctrl+\ -> ... -> ... -> enter`

![img](imgs/screen26.png)


##### JOE
- создаем файл test_joe.txt
- записываем в файл Karliahp и выходим с последующим сохранением:
`ctrl+K+Q, -> y`

![img](imgs/screen27.png)

- записываем в файл School 21 и выходим без последующего сохранения:
`ctrl+c -> y`

![img](imgs/screen28.png)

- находим в тексте необходимое слово и заменяем его на другое:
`ctrl+k+f -> ... -> r -> ... -> y`

![img](imgs/screen29.png)


### PART 8

- устанавливаем службу sshd:
`sudo apt install openssh-server`

![img](imgs/screen30.png)

Добавление автостарта службы при запуске системы с помощью команды:\
`sudo systemctl enable ssh`

![img](imgs/screen31.png)

- переустанавливаем службу sshd на порт 2022\
![img](imgs/screen35.png)
- рестартим :

`sudo apt install ssh`

![img](imgs/screen36.png)

> ps (показывает запущенные процессы, выполняемые пользователем в окне терминала);\
>ps -e или ps -A (Чтобы просмотреть все запущенные процессы);\
>ps -d (Чтобы показать все процессы, кроме лидеров сессии);\
>ps -d -N (можно инвертировать вывод с помощью переключателя -N. Например, если > > хочу вывести только лидеров сеансов)\
> ps T (увидеть только процессы, связанные с этим терминалом);\
> ps r (просмотреть все работающие (running) процессы);\
> ps -p 'pid' (если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду, для вывода процесса с этим 'pid');\
> ps -p 'pid1' 'pid2'\
> ps U 'userlist' (найти все процессы, выполняемые конкретным пользователем);\
> ps -ef (получить полный список);
 
- проверяем активные соединения следующей командой:/
`nestat -tan`
![img](imgs/screen37.png)

-t (--tcp) отображает соедниеня только по tcp\
-a (--all) вывод всех активных подключений TCP\
-n (--numeric) вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате\
Proto: Название протокола (протокол TCP или протокол UDP);\
recv-Q: очередь получения сети\
send-Q: Сетевая очередь отправки\
Local Address адрес локального компьтера и используемый номер порта
Foreign Address адрес и номер удаленного компьтера к которомц подключен сокет
State состояние сокетв
0.0.0.0 означает IP-адрес на локальной машине

### PART 9
- запускаем top

![img](imgs/screen40.png)

uptime - 50min;
количество авторизованных пользователей - 1;
общую загрузку системы - 0.00, 0.00, 0.00
общее количество процессов - 105;
загрузку cpu - 0.0%;
загрузку памяти - 254.2/3924.3;
pid процесса занимающего больше всего памяти - 1;

- запускаем htop

![img](imgs/screen41.png)

- сортировка по PID\
![img](imgs/screen42.png)

- сортировка по PERCENT_CPU

![img](imgs/screen43.png)

- сортировка по PERCENT_MEM

![img](imgs/screen44.png)

- сортировка по TIME

![img](imgs/screen39.png)

- Для процессора sshd: сначала нажимаем `\` - появляется поле для ввода, куда вписываем sshd\:

![img](imgs/screen45.png)

- Для поиска процесса syslog нажимаем `/` и вписываем название процесса syslog:

![img](imgs/screen46.png)

- Чтобы добавить вывод `hostname`, `clock` и `uptime` необходимо нажать `shift` + `s`, переместиться с помощью стрелочек от Setup -> Meters до столбца `Available meters`, выбрать параметр и нажать на `Enter` (он автоматически переместится в `Right column` и будет отображаться в выводе). Чтобы закрепить этот параметр за `Right column` необходимо еще раз нажать `Enter`:

![img](imgs/screen47.png)

### PART 10

- запускаем fdisk:
`fdisk -l`\
![img](imgs/screen48.png)
- смотрим выделена ли памят на swap: 
`free -m`\
![img](imgs/screen49.png)

>название жесткого диска: VBOX HARDDISK \
>размер: 10 Gb\
>количество секторов: 20971520\
>размер swap: 0 

### PART 11
- запускаем df:

![img](imgs/screen50.png)

  - размер раздела - 8408452
  - размер занятого пространства- 4267752
  - размер свободного пространства - 3691984
  - процент использования - 54
- все записано в Kb (1024-byte)

- запускаем df -Th\
![img](imgs/screen52.png)

##### Запустить команду df -Th.
- В отчёте написать для корневого раздела (/):
![img](imgs/screen51.png)
    - размер раздела - 8.1
    - размер занятого пространства - 4.1
    - размер свободного пространства -3.6
    - процент использования- 54
- тип файловой системы для раздела - ext4

### PART 12

- запускаем du\
![img](imgs/screen32.png)
- Выводим `sudo du -hs -B KB /home`\
размер /home - 78 kB\
- Выводим  `sudo du -hs -B KB /var`\
размер /var - 76082 kB\
- Выводим `sudo du -hs -B KB /var/log`\
размер /var/log - 28111 kB\

выводим размер каждого вложенного элемента, используя *:\
![img](imgs/screen53.png)

### PART 13
- Устанавливаем утилиту ncdu с помощью команды `sudo apt install ncdu`
- Вывести размер папок /home, /var, /var/log
- Выводим `sudo ncdu /home`\
![img](imgs/screen54.png)
- Выводим  `sudo ncdu /var `\
![img](imgs/screen55.png)
- Выводим `sudo ncdu /var/log`\
  ![img](imgs/screen33.png)
### PART 14
- открываем /var/log/dmesg:

![img](imgs/screen56.png)

- открываем /var/log/syslog:

![img](imgs/screen57.png)

- открываем /var/log/auth.log:

![img](imgs/screen58.png)

время последней успешной авторизации, имя пользователя и метод входа в систему:


>Mar 16 13:27:07\
>user-2\
>login


-Перезапускаю службу SSHd  командой `sudo systemctl restart sshd`

-скрин с сообщением о рестарте службы `tail /var/log/syslog`:

![img](imgs/screen60.png)

### PART 15
- создаю задачу в планировщике задач:
`crontab -e` и выбираем редактор `nano`
- записываю задачу для запуска uptime каждые 2 минуты:\

![img](imgs/screen61.png)

- проверяем исполнились ли задачи\
![img](imgs/screen64.png)

- удаление всех задачc
`crontab -r`

![img](imgs/screen65.png)